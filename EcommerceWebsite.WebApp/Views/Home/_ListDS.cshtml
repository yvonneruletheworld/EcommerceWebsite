@using EcommerceWebsite.Application.Pagination
@using EcommerceWebsite.Utilities.Main
@using EcommerceWebsite.Data.Enum

@model PageResponse<List<SanPhamOutput>>
    <!-- OFFER -->
            <div class="offer__container">
                <div class="row row-cols-5">
                    @if (Model.Data.Any())
                    {
                        foreach (var item in Model.Data)
                        {
                            <div class="col offer__col">
                                <div class="offer__item">
                                    <div class="offer__img">
                                        <img src="@item.HinhAnh" alt="" style="width:200px; height:210px">
                                        <div class="offer__details">
                                            <div class="offer__details-item">
                                                <button type="submit" class="btn">Thêm vào giỏ</button>
                                                <i class="fas fa-heart"></i>
                                                <i class="fas fa-signal"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <p>@item.TenSanPham</p>
                                    <p>43.990.000₫</p>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <h2>CHƯA CÓ SẢN PHẨM</h2>
                    }
                    </div>
                </div>
            <ul class="pagination pagination-custom">
                @if (Model.PageNumber > 1)
                {
                    <li class="page-item" style="cursor: pointer"><a onclick="getDataSanPham(@Model.PageNumber - 1))"><img src="../images/icon/ic-arrow-left-active.svg" alt="../images/ic-arrow-left-active.svg"></a></li>
                }
                else
                {
                    <li class="page-item disabled"><a href="#"><img src="../images/icon/ic-arrow-left.svg" alt="../images/ic-arrow-left.svg"></a></li>
                }

                @if (Model.TotalPages < 6)
                {
                    @for (int i = 1; i <= Model.TotalPages; i++)
                    {
                        <li class="page-item @(Model.PageNumber == i ? "page-item-active" : "")" style="cursor: pointer">
                            <a onclick="getDataSanPham(@i)">@i</a>
                        </li>
                    }
                }
                else
                {
                    var valStart = Model.PageNumber;
                    var value = Model.TotalPages / Model.PageNumber;
                    var valLength = value < 1 ? Model.PageNumber + value : Model.PageNumber + 2;

                    if (Model.PageNumber < 3)
                    {
                        valStart = 1;
                        valLength += (Model.PageNumber) == 1 ? 2 : 1;
                    }
                    else if (Model.TotalPages - Model.PageNumber <= 2)
                    {
                        valStart = Model.TotalPages - 4;
                        valLength = Model.TotalPages;
                    }
                    else
                    {
                        valStart = Model.PageNumber - 2;
                    }

                    @for (int i = valStart; i <= valLength; i++)
                    {
                        <li class="page-item @(Model.PageNumber == i ? "page-item-active" : "")" style="cursor: pointer">
                            <a onclick="getDataSanPham(@i)">@i</a>
                        </li>
                    }
                }

                @if (Model.PageNumber < Model.TotalPages)
                {
                    <li class="page-item" style="cursor: pointer"><a onclick="getDataSanPham(@Model.PageNumber + 1))"><img src="../images/icon/ic-arrow-right-active.svg" alt="../images/ic-arrow-right-active.svg"></a></li>
                }
                else
                {
                    <li class="page-item disabled"><a href="#"><img src="../images/icon/ic-arrow-right.svg" alt="../images/icon/ic-arrow-right.svg"></a></li>
                }
            </ul>