@using EcommerceWebsite.Application.Pagination
@using EcommerceWebsite.Utilities.Main
@using EcommerceWebsite.Data.Enum

@model PageResponse<List<SanPhamOutput>>

<table class="table table-striped table-borderless">
    <thead class="border-thead">
        <tr>
            <th class="checkbox">
                <div class="custom-control custom-checkbox">
                    <input onclick="selectCheckboxAll()" type="checkbox" class="custom-control-input" id="checkboxAll">
                    <label class="custom-control-label" for="checkboxAll"></label>
                </div>
            </th>
            <th class="cursor-pointer" onclick="sortByColumn('MaSanPham')" scope="col">Mã Sản Phẩm <img id="sortColumnId" src="~/images/icon/ic-sort-desc.svg" alt="~/images/icon/ic-sort.svg"></th>
            <th scope="col">Tên Sản Phẩm</th>
            <th scope="col">Số Lượng</th>
            <th class="cursor-pointer" onclick="sortByColumn('NhanHieu')" scope="col">Nhãn Hiệu <img id="sortColumnCreatedOn" src="~/images/icon/ic-sort-desc.svg" alt="~/images/icon/ic-sort.svg"></th>
            <th class="cursor-pointer" onclick="sortByColumn('NgayTao')" scope="col">Ngày Tạo<img id="sortColumnStatus" src="~/images/icon/ic-sort-desc.svg" alt="~/images/icon/ic-sort.svg"></th>
            <th scope="col">Trạng thái</th>
        </tr>
    </thead>
    <tbody class="table-custom">
        @if (Model.Data.Any())
        {
            foreach (var item in Model.Data)
            {
                var nameId = string.Format("{0}-{1}", item.NgayTao.ToLongDateString().Replace(" ", ""), item.MaSanPham);
                <tr>
                    <td class="checkbox">
                        <div class="custom-control custom-checkbox">
                            <input onclick="selectCheckboxItem()" type="checkbox" class="custom-control-input" id="@nameId" value="@item.MaSanPham">
                            <label class="custom-control-label" for="@nameId"></label>
                        </div>
                    </td>
                    <td id="ma-chitiet-sanpham" onclick="editAdmin('@item.MaSanPham')">@item.MaSanPham</td>
                    <td class="cursor-pointer" onclick="editAdmin('@item.MaSanPham')">@item.TenSanPham</td>
                    <td class="cursor-pointer" onclick="editAdmin('@item.MaSanPham')">@item.SoLuongTon</td>
                    <td class="cursor-pointer" onclick="editAdmin('@item.MaSanPham')">@item.NhanHieu</td>
                    <td class="cursor-pointer" onclick="editAdmin('@item.MaSanPham')">@item.NgayTao.ToString("yyyy-MM-dd")</td>
                    <td class="cursor-pointer" onclick="editAdmin('@item.MaSanPham')">@Html.Raw(item.Status.Equals(Status.Active) ? "Hoạt Động" : "Tạm Ngưng")</td>
                </tr>
            }
        }
        else
        {
            <tr class="text-center">
                <td colspan="7">Chưa có dữ liệu.</td>
            </tr>
        }
    </tbody>
</table>

<ul class="pagination pagination-custom">
    @if (Model.PageNumber > 1)
    {
        <li class="page-item" style="cursor: pointer"><a onclick="getDataSanPham(@Model.PageNumber - 1))"><img src="../images/icon/ic-arrow-left-active.svg" alt="../images/ic-arrow-left-active.svg"></a></li>
    }
    else
    {
        <li class="page-item disabled"><a href="#"><img src="../images/icon/ic-arrow-left.svg" alt="../images/ic-arrow-left.svg"></a></li>
    }

    @if (Model.TotalPages < 6)
    {
        @for (int i = 1; i <= Model.TotalPages; i++)
        {
            <li class="page-item @(Model.PageNumber == i ? "page-item-active" : "")" style="cursor: pointer">
                <a onclick="getDataSanPham(@i)">@i</a>
            </li>
        }
    }
    else
    {
        var valStart = Model.PageNumber;
        var value = Model.TotalPages / Model.PageNumber;
        var valLength = value < 1 ? Model.PageNumber + value : Model.PageNumber + 2;

        if (Model.PageNumber < 3)
        {
            valStart = 1;
            valLength += (Model.PageNumber) == 1 ? 2 : 1;
        }
        else if (Model.TotalPages - Model.PageNumber <= 2)
        {
            valStart = Model.TotalPages - 4;
            valLength = Model.TotalPages;
        }
        else
        {
            valStart = Model.PageNumber - 2;
        }

        @for (int i = valStart; i <= valLength; i++)
        {
            <li class="page-item @(Model.PageNumber == i ? "page-item-active" : "")" style="cursor: pointer">
                <a onclick="getDataSanPham(@i)">@i</a>
            </li>
        }
    }

    @if (Model.PageNumber < Model.TotalPages)
    {
        <li class="page-item" style="cursor: pointer"><a onclick="getDataSanPham(@Model.PageNumber + 1))"><img src="../images/icon/ic-arrow-right-active.svg" alt="../images/ic-arrow-right-active.svg"></a></li>
    }
    else
    {
        <li class="page-item disabled"><a href="#"><img src="../images/icon/ic-arrow-right.svg" alt="../images/icon/ic-arrow-right.svg"></a></li>
    }
</ul>

